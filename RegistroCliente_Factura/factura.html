<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Factura - Modric Estudio</title>
    <link rel="stylesheet" href="factura.css" />
    <style>
      /* ==========================================
         ESTILOS ADICIONALES PARA SECCI√ìN DE ABONOS
      ========================================== */
      #detallesPago {
        margin-top: 20px;
        padding: 15px 20px;
        background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        border-left: 5px solid #ff9800;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(255, 152, 0, 0.15);
      }
      
      #detallesPago h3 {
        color: #e65100;
        margin: 0 0 15px 0;
        font-size: 18px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      #detallesPago h3::before {
        content: "üí∞";
        font-size: 22px;
      }
      
      .pago-detalle-tabla {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 10px;
      }
      
      .pago-detalle-tabla td {
        padding: 8px 0;
        font-size: 15px;
      }
      
      .pago-detalle-tabla td:first-child {
        font-weight: 600;
        color: #555;
      }
      
      .pago-detalle-tabla td:last-child {
        text-align: right;
        font-weight: 700;
      }
      
      .pago-total-row td {
        padding-top: 15px;
        border-top: 2px solid #e65100;
        font-size: 17px;
      }
      
      .pago-total-row td:first-child {
        color: #e65100;
      }
      
      .pago-total-row td:last-child {
        color: #e65100;
      }
      
      .pago-abonado {
        color: #4caf50 !important;
      }
      
      .pago-pendiente {
        color: #e65100 !important;
      }
      
      .pago-nota {
        margin: 10px 0 0 0;
        padding: 10px;
        background-color: rgba(255, 255, 255, 0.7);
        border-radius: 5px;
        font-size: 13px;
        color: #666;
        line-height: 1.5;
      }
      
      .pago-nota strong {
        color: #e65100;
      }
      
      /* Estilo para pago completo */
      #detallesPago.pago-completo {
        background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        border-left-color: #4caf50;
      }
      
      #detallesPago.pago-completo h3 {
        color: #2e7d32;
      }
      
      #detallesPago.pago-completo h3::before {
        content: "‚úÖ";
      }

      /* ==== NUEVO: BOT√ìN REGRESAR FIJO (ESQUINA SUPERIOR IZQUIERDA) ==== */
      .btn-regresar-fixed {
        position: fixed;
        top: 20px;
        left: 20px;
        background-color: #757575;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .btn-regresar-fixed:hover {
        background-color: #616161;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
      }

      .btn-regresar-fixed:active {
        transform: translateY(0);
      }

      /* ==== BOTONES DE ACCI√ìN ==== */
      .acciones-factura {
        display: flex;
        gap: 10px;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        margin-top: 25px;
      }

      .btn-pdf {
        display: inline-block;
        background-color: #004aad;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-pdf:hover {
        background-color: #002f70;
        transform: scale(1.05);
      }

      .btn-whatsapp {
        display: inline-block;
        background-color: #25d366;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-whatsapp:hover {
        background-color: #1ca650;
        transform: scale(1.05);
      }

      /* ==== RESPONSIVE ==== */
      @media (max-width: 768px) {
        body {
          padding: 20px 15px;
        }

        .btn-regresar-fixed {
          top: 10px;
          left: 10px;
          padding: 10px 18px;
          font-size: 14px;
        }

        .contenedor-factura {
          margin-top: 60px; /* Espacio para el bot√≥n fijo */
        }

        .acciones-factura {
          flex-direction: column;
          gap: 8px;
        }

        .btn-pdf,
        .btn-whatsapp {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <!-- NUEVO: Bot√≥n Regresar en esquina superior izquierda -->
    <button id="btnRegresar" class="btn-regresar-fixed" onclick="regresarAPanel()">
      ‚Üê Regresar
    </button>

    <div class="contenedor-factura">
      <header>
        <div class="logo">
          <img src="../imagenes/logo.png" alt="Modric Estudio Logo" />
        </div>
        <div class="info-empresa">
          <p><strong>Modric Estudio</strong></p>
          <p>Panam√°,<br />La Chorrera</p>
          <p>Modricestudio@gmail.com</p>
        </div>
        <div class="info-factura">
          <p><strong>FACTURA N¬∫:</strong> <span id="numeroFactura"></span></p>
          <p><strong>Fecha:</strong> <span id="fechaFactura"></span></p>
        </div>
      </header>

      <section class="datos">
        <div class="col">
          <h3>Datos del Cliente</h3>
          <p id="clienteNombre"></p>
          <p id="clienteDireccion"></p>
          <p id="clienteCorreo"></p>
          <p id="clienteTelefono"></p>
        </div>
      </section>

      <table class="tabla-productos">
        <thead>
          <tr>
            <th>Descripci√≥n / Producto</th>
            <th>Base</th>
            <th>ITBMS</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody id="tablaProductos"></tbody>
      </table>

      <div class="total">
        <p><strong>Total:</strong> $<span id="totalFactura"></span></p>
      </div>

      <!-- ==========================================
           SECCI√ìN DE DETALLES DE PAGO (ABONO)
           - Se muestra solo si tipoPago === 'abono'
           - Se oculta por defecto, JS lo activa
      ========================================== -->
      <div id="detallesPago" style="display: none;">
        <h3>Detalles de Pago (Abono)</h3>
        <table class="pago-detalle-tabla">
          <tr>
            <td>Total del Pedido:</td>
            <td id="pagoTotalPedido">$0.00</td>
          </tr>
          <tr class="pago-abonado">
            <td>Monto Abonado:</td>
            <td id="montoAbonado">$0.00</td>
          </tr>
          <tr class="pago-total-row pago-pendiente">
            <td>Saldo Pendiente:</td>
            <td id="saldoPendiente">$0.00</td>
          </tr>
        </table>
        <div class="pago-nota">
          ‚ö†Ô∏è <strong>Nota:</strong> Este pedido tiene un saldo pendiente de pago. 
          Por favor, comun√≠quese con nosotros para coordinar el pago del saldo restante.
        </div>
      </div>

      <section class="comentario">
        <h3>Comentario del Cliente</h3>
        <p id="comentarioCliente">No se ingres√≥ ning√∫n comentario.</p>
      </section>

      <footer>
        <p>
          El pago se realizar√° en un plazo de tres meses desde la emisi√≥n de
          esta factura,<br />
          se realizar√° mediante el m√©todo especificado.
        </p>
      </footer>
    </div>

    <div class="acciones-factura">
      <button id="btnGenerarPDF" class="btn-pdf" onclick="generarPDF()">
        üìÑ Generar PDF
      </button>

      <button id="btnWhatsApp" class="btn-whatsapp" onclick="enviarPorWhatsApp()">
        üì± Enviar por WhatsApp
      </button>
    </div>

    <script src="../js/global-script.js"></script>
    <script src="factura.js"></script>
  </body>
</html>